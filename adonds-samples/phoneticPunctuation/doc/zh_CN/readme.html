<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="stylesheet" type="text/css" href="../style.css" media="screen"/>
<title>Earcons and speech rules 3.0.6</title>
</head>
<body>
<h1>耳标和语音规则</h1>
<p>耳标和语音规则是一款NVDA插件，可以让 NVDA 播放耳标及其他音频效果（如韵律调整）。
该插件前身为"语音标点"，现已整合了"Unspoken"插件的几乎所有功能（截至2024年，原插件已停止维护）。</p>
<h2>演示</h2>
<p>点击此处收听语音标点的示例语音（10秒音频）：
https://soundcloud.com/user-977282820/nvda-phonetic-punctuation-demo</p>
<h2>下载</h2>
<p>请通过NVDA插件商店安装最新版本。</p>
<h2>使用说明</h2>
<ol>
<li>确保"耳标和语音规则"插件已启用。按NVDA+Alt+P切换启用状态</li>
<li>通过NVDA菜单"选项"中的"耳标和语音规则"设置每种规则</li>
<li>默认包含预定义音频规则集（多数默认禁用），可通过配置界面启用或新增规则</li>
<li>规则文件保存于NVDA配置目录的<code>earconsAndSpeechRules.json</code></li>
<li>注意：不同语音合成器对设置的支持存在差异（详见"支持的语音合成器"章节）</li>
</ol>
<h2>规则类型</h2>
<p>通过NVDA设置中的"耳标和语音规则"面板进行配置</p>
<h3>文本规则</h3>
<p>基于正则表达式匹配NVDA朗读的内容，可替换为耳标或调整韵律参数（如音高）。支持以下触发条件：</p>
<ul>
<li>特定应用程序（需参考"黑名单设置"章节获取应用名称）</li>
<li>指定窗口标题</li>
<li>特定URL（需安装BrowserNav插件）</li>
</ul>
<p>执行顺序遵循配置列表顺序。若规则失效，建议将其置顶（例如：IP地址匹配需确保未被前置规则修改）。<br />
注意：逐字符移动时不会触发文本规则。</p>
<h3>字符规则</h3>
<p>拼读模式下，可将字符描述（如"空格"或"Tab"）替换为耳标。不影响普通文本朗读。</p>
<h3>对象角色</h3>
<p>根据控件类型（如"可编辑区域"或"按钮"）播放对应耳标。此功能原属Unspoken插件。</p>
<h3>状态与否定状态</h3>
<p>可将"已勾选"等状态替换为耳标，或通过勾选"在非详细状态模式下禁止读出该状态"隐藏次要信息。
按NVDA+Alt+[ 可切换简洁状态朗读模式（访问http://google.com对比主编辑框的朗读差异）。</p>
<h3>文本格式</h3>
<p>支持通过耳标或韵律参数反馈以下格式：</p>
<ul>
<li>粗体/斜体</li>
<li>下划线/删除线</li>
<li>高亮</li>
<li>标题</li>
</ul>
<h3>数值格式</h3>
<p>提供两种朗读方式：</p>
<ul>
<li>通过音高反馈字号</li>
<li>用"H1"等简写替代"1级标题"</li>
</ul>
<h3>其他音频规则</h3>
<p>可替换以下NVDA朗读内容：</p>
<ul>
<li>空白区域</li>
<li>离开容器（如框架、表格、列表）</li>
<li>无缩进（当缩进级别播报设为语音时）</li>
</ul>
<h2>快捷键</h2>
<ul>
<li>NVDA+Alt+P：切换插件功能启用状态</li>
<li>NVDA+Alt+[：切换简洁状态朗读模式</li>
<li>NVDA+H：读出当前标题级别</li>
</ul>
<h2>支持的语音合成器</h2>
<p>注：因依赖高级语音指令，部分TTS存在兼容性问题</p>
<h3>良好支持</h3>
<ul>
<li>Microsoft Speech API</li>
<li>eSpeak</li>
<li>Windows OneCore</li>
<li>Eloquence threshold</li>
</ul>
<h3>已知问题</h3>
<ul>
<li><strong>IBMTTS（2024年12月）</strong>：参见<a href="https://github.com/davidacm/NVDA-IBMTTS-Driver/issues/22">此问题</a>。已通过<a href="https://github.com/davidacm/NVDA-IBMTTS-Driver/pull/96">此PR</a>修复，但作者尚未合并。如需使用，请敦促作者合并。</li>
<li><strong>RHVoice（2020年1月）</strong>：不支持BreakCommand</li>
</ul>
<h2>黑名单设置</h2>
<p>在匹配的应用名称内禁用该插件，多个应用名称以半角逗号(,)分隔。</p>
<p>获取当前应用名称：切换到目标应用 → 按NVDA+Control+Z打开控制台 → 输入<code>focus.appModule.appName</code></p>
<p>示例：slack,discord</p>
<h2>已知问题与限制</h2>
<ol>
<li>"离开容器"耳标可能顺序错乱（如在标题后触发而非标题前）</li>
<li>因标题处理机制导致文本块分割时产生复杂交互</li>
<li>角色/状态/格式规则在"全文朗读"模式中无效</li>
<li>韵律指令在全文朗读时可能被重新排序，导致缓冲区下溢（暂列为低优先级）</li>
<li>链接内格式变化会重复触发链接耳标</li>
<li>因<code>getTextInfoSpeech</code>函数中的<code>if not extraDetail:</code>条件导致（规避可能引发更多副作用）</li>
</ol>
<h2>版权声明</h2>
<ul>
<li><strong>3D/钟声/经典/泛钟声类耳标</strong>：由T.V. Raman设计（源自emacspeak），详见：https://github.com/tvraman/emacspeak/</li>
<li><strong>标点类耳标</strong>：由Kara Goldfinch设计</li>
<li><strong>角色类耳标</strong>：由Unspoken插件原作者设计</li>
</ul>
</body>
</html>